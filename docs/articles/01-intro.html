<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="climateR">
<title>Welcome to climateR â€¢ climateR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Welcome to climateR">
<meta property="og:description" content="climateR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">climateR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mikejohnson51/climateR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Welcome to climateR</h1>
                        <h4 data-toc-skip class="author">Mike
Johnson</h4>
            <address class="author_afil">
      Lynker<br><small class="dont-index">Source: <a href="https://github.com/mikejohnson51/climateR/blob/HEAD/vignettes/01-intro.Rmd" class="external-link"><code>vignettes/01-intro.Rmd</code></a></small>
      <div class="d-none name"><code>01-intro.Rmd</code></div>
    </address>
</div>

    
    
<div class="section level2">
<h2 id="usful-packages-for-climate-data">Usful Packages for climate data<a class="anchor" aria-label="anchor" href="#usful-packages-for-climate-data"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mikejohnson51/AOI/" class="external-link">AOI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mikejohnson51/climateR" class="external-link">climateR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dieghernan.github.io/tidyterra/" class="external-link">tidyterra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="climater-examples">climateR examples<a class="anchor" aria-label="anchor" href="#climater-examples"></a>
</h2>
<p>The climateR package is supplemented by the <a href="https://github.com/mikejohnson51/AOI" class="external-link">AOI</a> framework
established in the <code>AOI</code> R package.</p>
<p>To get a climate product, an area of interest must be defined:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AOI</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/AOI/man/aoi_get.html" class="external-link">aoi_get</a></span><span class="op">(</span>state <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">AOI</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-3-1.png" width="100%"></p>
<p>Here we are loading a polygon for the state of North Carolina More
examples of constructing AOI calls can be found <a href="https://mikejohnson51.github.io/AOI/" class="external-link">here</a>.</p>
<p>With an AOI, we can construct a call to a dataset for a parameter(s)
and date(s) of choice. Here we are querying the PRISM dataset for
maximum and minimum temperature on October 29, 2018:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span></span>
<span> <span class="va">p</span> <span class="op">=</span> <span class="fu"><a href="../reference/getPRISM.html">getPRISM</a></span><span class="op">(</span><span class="va">AOI</span>, </span>
<span>              varname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'tmax'</span>,<span class="st">'tmin'</span><span class="op">)</span>, </span>
<span>              startDate <span class="op">=</span> <span class="st">"2018-10-29"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.816   0.109   1.997</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-5-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="data-from-known-bounding-coordinates">Data from known bounding coordinates<a class="anchor" aria-label="anchor" href="#data-from-known-bounding-coordinates"></a>
</h2>
<p><code>climateR</code> offers support for <code>sf</code>,
<code>sfc</code>, and <code>bbox</code> objects. Here we are requesting
wind velocity data for the four corners region of the USA by bounding
coordinates.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AOI</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">-</span><span class="fl">112</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">105</span>, ymax <span class="op">=</span> <span class="fl">39</span>, ymin <span class="op">=</span> <span class="fl">34</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/getGridMET.html">getGridMET</a></span><span class="op">(</span><span class="va">AOI</span>, </span>
<span>               varname <span class="op">=</span> <span class="st">"vs"</span>,</span>
<span>               startDate <span class="op">=</span> <span class="st">"2018-09-01"</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-7-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="data-through-time">Data through time â€¦<a class="anchor" aria-label="anchor" href="#data-through-time"></a>
</h2>
<p>In addition to multiple variables we can request variables through
time, here letâ€™s look at the gridMET rainfall for the Gulf Coast during
Hurricane Harvey:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">harvey</span> <span class="op">=</span> <span class="fu"><a href="../reference/getGridMET.html">getGridMET</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/AOI/man/aoi_get.html" class="external-link">aoi_get</a></span><span class="op">(</span>state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TX"</span>, <span class="st">"FL"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                  varname <span class="op">=</span> <span class="st">"pr"</span>, </span>
<span>                  startDate <span class="op">=</span> <span class="st">"2017-08-20"</span>, </span>
<span>                  endDate <span class="op">=</span> <span class="st">"2017-08-31"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/geom_spatraster.html" class="external-link">geom_spatraster</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">harvey</span><span class="op">$</span><span class="va">precipitation_amount</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">lyr</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/scale_fill_whitebox.html" class="external-link">scale_fill_whitebox_c</a></span><span class="op">(</span></span>
<span>    palette <span class="op">=</span> <span class="st">"muted"</span>,</span>
<span>    na.value <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-8-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="climate-projections">Climate Projections<a class="anchor" aria-label="anchor" href="#climate-projections"></a>
</h2>
<p>Some sources are downscaled Global Climate Models (GCMs). These allow
you to query forecasted ensemble members from different models and/or
climate scenarios. One example is from the MACA dataset:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span></span>
<span><span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="../reference/getMACA.html">getMACA</a></span><span class="op">(</span>AOI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/AOI/man/aoi_get.html" class="external-link">aoi_get</a></span><span class="op">(</span>state <span class="op">=</span> <span class="st">"FL"</span><span class="op">)</span>, </span>
<span>            model <span class="op">=</span> <span class="st">"CCSM4"</span>, </span>
<span>            varname <span class="op">=</span> <span class="st">'pr'</span>, </span>
<span>            scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'rcp45'</span>, <span class="st">'rcp85'</span><span class="op">)</span>, </span>
<span>            startDate <span class="op">=</span> <span class="st">"2080-06-29"</span>, endDate <span class="op">=</span> <span class="st">"2080-06-30"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.130   0.019   4.669</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-10-1.png" width="100%"></p>
<p>Getting multiple models results is also quite simple:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BNU-ESM"</span>,<span class="st">"CanESM2"</span>, <span class="st">"CCSM4"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">temp</span> <span class="op">=</span>  <span class="fu"><a href="../reference/getMACA.html">getMACA</a></span><span class="op">(</span>AOI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/AOI/man/aoi_get.html" class="external-link">aoi_get</a></span><span class="op">(</span>state <span class="op">=</span> <span class="st">"CO"</span><span class="op">)</span>,</span>
<span>                varname <span class="op">=</span> <span class="st">'tasmin'</span>, </span>
<span>                model <span class="op">=</span> <span class="va">models</span>, </span>
<span>                startDate <span class="op">=</span> <span class="st">"2080-11-29"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">temp</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">mean</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/app.html" class="external-link">app</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">mean</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">models</span>, <span class="st">"Ensemble Mean"</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-12-1.png" width="100%">
If you donâ€™t know your models, you can always grab a random set by
specifying a number:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">random</span> <span class="op">=</span> <span class="fu"><a href="../reference/getMACA.html">getMACA</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/AOI/man/aoi_get.html" class="external-link">aoi_get</a></span><span class="op">(</span>state <span class="op">=</span> <span class="st">"MI"</span><span class="op">)</span>, </span>
<span>                 model <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                 varname <span class="op">=</span> <span class="st">"pr"</span>, </span>
<span>                 startDate <span class="op">=</span> <span class="st">"2050-10-29"</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-14-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="global-datasets">Global Datasets<a class="anchor" aria-label="anchor" href="#global-datasets"></a>
</h2>
<p>Not all datasets are USA focused either. TerraClimate offers global,
monthly data up to the current year for many variables, and CHIRPS
provides daily rainfall data:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kenya</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/AOI/man/aoi_get.html" class="external-link">aoi_get</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"Kenya"</span><span class="op">)</span></span>
<span><span class="va">tc</span> <span class="op">=</span> <span class="fu"><a href="../reference/getTerraClim.html">getTerraClim</a></span><span class="op">(</span><span class="va">kenya</span>, varname <span class="op">=</span> <span class="st">"pet"</span>, startDate <span class="op">=</span> <span class="st">"2018-01-01"</span><span class="op">)</span></span>
<span><span class="va">chirps</span> <span class="op">=</span> <span class="fu"><a href="../reference/getCHIRPS.html">getCHIRPS</a></span><span class="op">(</span><span class="va">kenya</span>, startDate <span class="op">=</span> <span class="st">"2018-01-01"</span>, endDate <span class="op">=</span> <span class="st">"2018-01-04"</span> <span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-16-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="point-based-data">Point Based Data<a class="anchor" aria-label="anchor" href="#point-based-data"></a>
</h2>
<p>Finally, data gathering is not limited to areal extents and can be
retrieved as a time series at locations.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ts</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lng  <span class="op">=</span> <span class="op">-</span><span class="fl">105.0668</span>, lat <span class="op">=</span> <span class="fl">40.55085</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'lng'</span>, <span class="st">'lat'</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/getGridMET.html">getGridMET</a></span><span class="op">(</span>varname <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pr"</span>, <span class="st">'srad'</span><span class="op">)</span>, </span>
<span>             startDate <span class="op">=</span> <span class="st">"2021-01-01"</span>, </span>
<span>             endDate <span class="op">=</span> <span class="st">"2021-12-31"</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-18-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="point-based-ensemble">Point Based Ensemble<a class="anchor" aria-label="anchor" href="#point-based-ensemble"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">future</span> <span class="op">=</span> <span class="fu"><a href="../reference/getMACA.html">getMACA</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/AOI/man/geoCode.html" class="external-link">geocode</a></span><span class="op">(</span><span class="st">"Fort Collins"</span>, pt <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>                 model <span class="op">=</span> <span class="fl">5</span>, varname <span class="op">=</span> <span class="st">"tasmax"</span>, </span>
<span>                 startDate <span class="op">=</span> <span class="st">"2050-01-01"</span>, endDate <span class="op">=</span> <span class="st">"2050-01-31"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">future_long</span> <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">future</span>, <span class="op">-</span><span class="va">date</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">future_long</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value</span>, col <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_linedraw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Dark2"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Fort Collins Temperture: January, 2050"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Degree K"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Model"</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-19-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="multi-site-extraction">Multi site extraction<a class="anchor" aria-label="anchor" href="#multi-site-extraction"></a>
</h2>
<p>Extracting data for a set of points is an interesting challenge. It
turns it is much more efficient to grab the underlying raster stack and
then extract time series as opposed to iterating over the locations:</p>
<ol style="list-style-type: decimal">
<li>Starting with a set of locations in Colorado:</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"co/cities_colorado.rds"</span>, package <span class="op">=</span> <span class="st">"climateR"</span><span class="op">)</span></span>
<span><span class="va">cities</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/serialize.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>
<code>climateR</code> will grab the SpatRaster underlying the
bounding area of the points</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sites_stack</span> <span class="op">=</span> <span class="fu"><a href="../reference/getTerraClim.html">getTerraClim</a></span><span class="op">(</span>AOI   <span class="op">=</span> <span class="va">cities</span>, </span>
<span>                           varname <span class="op">=</span> <span class="st">"tmax"</span>, </span>
<span>                           startDate <span class="op">=</span> <span class="st">"2018-01-01"</span>, </span>
<span>                           endDate   <span class="op">=</span> <span class="st">"2018-12-31"</span><span class="op">)</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-22-1.png" width="100%"></p>
<ol start="3" style="list-style-type: decimal">
<li>Use <code>extract_sites</code> to extract the times series from
these locations. The <code>id</code> parameter is the unique identifier
from the site data with which to names the resulting columns.</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sites_wide</span> <span class="op">=</span> <span class="fu"><a href="../reference/extract_sites.html">extract_sites</a></span><span class="op">(</span>r <span class="op">=</span> <span class="va">sites_stack</span>, pts <span class="op">=</span> <span class="va">cities</span>, id <span class="op">=</span> <span class="st">"NAME"</span><span class="op">)</span></span>
<span><span class="va">sites_wide</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;                  date ADAMSCITY AGATE AGUILAR AKRON</span></span>
<span><span class="co">#&gt; 1 2018-01-01 00:00:00       9.5   8.2    11.4   7.1</span></span>
<span><span class="co">#&gt; 2 2018-01-31 10:00:00       8.1   7.1     9.9   5.8</span></span>
<span><span class="co">#&gt; 3 2018-03-02 20:00:00      14.6  14.1    15.0  13.5</span></span>
<span><span class="co">#&gt; 4 2018-04-02 06:00:00      17.5  16.6    17.6  16.2</span></span>
<span><span class="co">#&gt; 5 2018-05-02 16:00:00      25.1  25.0    25.5  24.8</span></span></code></pre></div>
<p>To make the data â€˜tidyâ€™ simply pivot on the <code>date</code>
column:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmax</span> <span class="op">=</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">sites_wide</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="op">-</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tmax</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 Ã— 3</span></span></span>
<span><span class="co">#&gt;   date                name       value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2018-01-01 <span style="color: #949494;">00:00:00</span> ADAMSCITY   9.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2018-01-01 <span style="color: #949494;">00:00:00</span> AGATE       8.2 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2018-01-01 <span style="color: #949494;">00:00:00</span> AGUILAR    11.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2018-01-01 <span style="color: #949494;">00:00:00</span> AKRON       7.10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2018-01-01 <span style="color: #949494;">00:00:00</span> ALAMOSA     5.2 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2018-01-01 <span style="color: #949494;">00:00:00</span> ALLENSPARK  6.10</span></span></code></pre></div>
<p><img src="01-intro_files/figure-html/unnamed-chunk-25-1.png" width="100%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mike Johnson, Justin Singh, Angus Watters.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
